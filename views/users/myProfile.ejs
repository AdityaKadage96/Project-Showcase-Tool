
<%- include("../partials/header") %>

<div class="container py-5">
  <!-- Welcome & My Projects Section -->
  <div class="mb-5 text-center">
    <h2 class="fw-bold text-gradient display-5 mb-2">Welcome, <%= user.username %> ðŸ‘‹</h2>
    <h4 class="fw-bold text-secondary">My Projects</h4>
    <hr class="w-25 mx-auto border-primary border-2 mt-3">
  </div>

  <% if (projects.length === 0) { %>
    <div class="alert alert-warning shadow-sm rounded-pill px-4 py-3 text-center">
      You haven't added any projects yet.
    </div>
  <% } else { %>
    <div class="row g-4">
      <% projects.forEach(project => { %>
        <div class="col-md-4">
          <div class="card glass-card border-0 shadow-lg rounded-4 overflow-hidden h-100">
            <!-- Project Image -->
            <% if (project.images && project.images.length > 0) { %>
              <img src="<%= typeof project.images[0] === 'string' ? project.images[0] : project.images[0].url %>" 
                   class="card-img-top project-img" 
                   alt="<%= project.title %> preview">
            <% } else { %>
              <div class="d-flex align-items-center justify-content-center bg-dark text-light project-img">
                No Image
              </div>
            <% } %>

            <!-- Project Content -->
            <div class="card-body d-flex flex-column">
              <h5 class="fw-bold text-gradient mb-2 fs-5"><%= project.title %></h5>
              <p class="text-muted small mb-2"><strong>Tech Stack:</strong> <%= project.techStack %></p>
              <p class="text-dark small flex-grow-1">
                <%= project.description.length > 100 ? project.description.substring(0, 100) + "..." : project.description %>
              </p>

              <!-- Project Links -->
              <div class="mb-3">
                <% if (project.githubLink) { %>
                  <!-- <p class="mb-1">
                    <i class="bi bi-github me-1"></i>
                    <a href="<%= project.githubLink %>" target="_blank" class="link-primary">Source Code</a>
                  </p> -->
                   <a href="<%= project.githubLink %>" target="_blank" class="btn btn-outline-dark me-2 mb-2 shadow-sm">
                     <i class="bi bi-github me-1 "></i> GitHub
                  </a>
                <% } %>
                <% if (project.liveLink) { %>
                  <!-- <p class="mb-0">
                    <i class="bi bi-globe me-1"></i>
                    <a href="<%= project.liveLink %>" target="_blank" class="link-success">Live Demo</a>
                  </p> -->

                   <a href="<%= project.liveLink %>" target="_blank" class="btn btn-outline-dark mb-2 shadow-sm">
                     <i class="fas fa-globe me-1"></i> Live Demo
                     <!-- <i class="bi bi-globe me-1"></i> Live Demo -->
                   </a>
                <% } %>
              </div>

              <!-- Action Buttons -->
              <div class="mt-auto d-flex gap-2 flex-wrap">
                <a href="/projects/<%= project._id %>" class="btn btn-outline-primary btn-sm rounded px-3">
                  <i class="bi bi-eye me-1"></i> View
                </a>
                <a href="/projects/<%= project._id %>/edit" class="btn btn-warning btn-sm rounded px-3">
                  <i class="bi bi-pencil-square me-1"></i> Edit
                </a>
                <form method="POST" action="/projects/<%= project._id %>?_method=DELETE" class="d-inline">
                  <button class="btn btn-danger btn-sm rounded px-3">
                    <i class="bi bi-trash me-1"></i> Delete
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>

<style>
  /* Glassmorphism Style */
  .glass-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(14px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .glass-card:hover {
    transform: translateY(-5px);
    box-shadow: 0px 8px 25px rgba(0, 0, 0, 0.3);
  }
  /* Gradient Text */
  .text-gradient {
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  /* Project Image */
  .project-img {
    height: 200px;
    object-fit: cover;
  }
  /* Ensure headings are sharp and not transparent */
  h4.fw-bold.text-light {
    opacity: 1 !important;
  }
</style>

<%- include("../partials/footer") %>


