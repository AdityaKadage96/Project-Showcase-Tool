<%- include("../partials/header") %>

<div class="container py-4">
  <div class="card shadow-lg border-0">
    <div class="card-body">
      <h3 class="card-title mb-4 text-primary">Edit Project</h3>

      <form action="/projects/<%= project._id %>?_method=PUT" method="POST" enctype="multipart/form-data">

        <!-- Project Name -->
        <div class="mb-3">
          <label for="name" class="form-label">Project Name</label>
          <input type="text" class="form-control" id="name" name="title" value="<%= project.title %>" required>
        </div>

        <!-- Description -->
        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" id="description" name="description" rows="4" required><%= project.description %></textarea>
        </div>

        <!-- Tech Stack -->
        <div class="mb-3">
          <label for="techStack" class="form-label">Tech Stack</label>
          <input type="text" class="form-control" id="techStack" name="techStack" value="<%= project.techStack %>" required>
        </div>

        <!-- GitHub Link -->
        <div class="mb-3">
          <label for="githubLink" class="form-label">GitHub Link</label>
          <input type="url" class="form-control" id="githubLink" name="githubLink" value="<%= project.githubLink %>" required>
        </div>

        <!-- Live Project Link -->
        <div class="mb-3">
          <label for="liveLink" class="form-label">Live Project Link</label>
          <input type="url" class="form-control" id="liveLink" name="liveLink" value="<%= project.liveLink %>" required>
        </div>

        <!-- Current Main Image -->
        <div class="mb-3">
          <label class="form-label fw-semibold">Current Main Image</label><br>
          <img src="<%= project.image %>" alt="Current Main Image" class="img-fluid rounded shadow-sm" style="max-height: 200px;">
        </div>

        <!-- Current Additional Images -->
        <div class="mb-3">
          <label class="form-label fw-semibold">Current Images</label><br>
          <% if (project.images && project.images.length > 0) { %>
            <div class="d-flex flex-wrap gap-2">
              <% project.images.forEach(img => { %>
                <img src="<%= img.url %>" alt="Image" class="img-thumbnail shadow-sm" style="max-height: 150px;">
              <% }) %>
            </div>
          <% } else { %>
            <p class="text-muted">No images available</p>
          <% } %>
        </div>

        <!-- Upload New Images -->
        <div class="mb-3">
          <label for="images" class="form-label">Change Images (optional)</label>
          <input class="form-control" type="file" id="images" name="images" accept="image/*" multiple onchange="previewImages(event)">
          <div id="previewContainer" class="mt-3 d-flex flex-wrap gap-2"></div>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-between">
          <a href="/projects" class="btn btn-secondary">Back</a>
          <button type="submit" class="btn btn-success">Update Project</button>
        </div>

      </form>
    </div>
  </div>
</div>

<script>
  function previewImages(event) {
    const container = document.getElementById("previewContainer");
    container.innerHTML = "";
    const files = event.target.files;
    Array.from(files).forEach(file => {
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.classList.add("img-thumbnail");
        img.style.maxHeight = "150px";
        container.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  }
</script>

<%- include("../partials/footer") %>


<!-- <%- include("../partials/header") %> -->


<!-- <form action="/projects/<%= project._id %>?_method=PUT" method="POST" enctype="multipart/form-data">

  <div class="mb-3">
    <label for="name" class="form-label">Project Name</label>
    <input type="text" class="form-control" id="name" name="title" value="<%= project.title %>" required>
  </div>

  <div class="mb-3">
    <label for="description" class="form-label">Description</label>
    <textarea class="form-control" id="description" name="description" rows="4" required><%= project.description %></textarea>
  </div>
  <div class="mb-3">
    <label for="description" class="form-label">Tech Stack</label>
    <input type="text" class="form-control" id="category" name="techStack" value="<%= project.techStack %>" required >
  </div>

  <div class="mb-3">
    <label for="description" class="form-label">Github Link</label>
    <input type="text" class="form-control" id="category" name="githubLink" value="<%= project.githubLink %>" required>
  </div>
  <div class="mb-3">
    <label for="description" class="form-label">LiveProject Link</label>
    <input type="text" class="form-control" id="category" name="liveLink" value="<%= project.liveLink %>" required>
  </div> -->

  <!-- Current Image Display -->
  <!-- <div class="mb-3">
    <label class="form-label">Current Image</label><br>
    <img src="<%= project.image %>" alt="Current Image" class="img-fluid rounded mb-2" style="max-height: 200px;">
  </div> -->
  <!-- Current Images Display -->
<!-- <div class="mb-3">
  <label class="form-label">Current Images</label><br>
  <% if (project.images && project.images.length > 0) { %>
    <% project.images.forEach(img => { %>
      <img src="<%= img.url %>" alt="Image" class="img-fluid rounded mb-2" style="max-height: 200px;">
    <% }) %>
  <% } else { %>
    <p>No images available</p>
  <% } %>
</div> -->


  <!-- File Upload Input -->
   <!-- File Upload Input -->
  <!-- <div class="mb-3">
    <label for="images" class="form-label">Change Images (optional)</label>
    <input class="form-control" type="file" id="images" name="images" accept="image/*" multiple onchange="previewImage(event)">
    <div id="previewContainer" class="mt-2"></div>
  </div> -->

<!-- 
  <div class="mb-3">
    <label for="category" class="form-label">Category</label>
    <input type="text" class="form-control" id="category" name="category" value="<%= project.category %>">
  </div> -->

  <!-- <div class="d-flex justify-content-between">
    <a href="/projects" class="btn btn-secondary">Back</a>
    <button type="submit" class="btn btn-success">Update Project</button>
  </div>
</form>

<script>
  function previewImage(event) {
    const output = document.getElementById("preview");
    output.src = URL.createObjectURL(event.target.files[0]);
    output.style.display = "block";
  }
</script>

<%- include("../partials/footer") %> -->