
<%- include("../partials/header") %>

<!-- ğŸš€ Login Status -->
<div class="container mt-4">
  <% if (!currentUsername) { %>
    <div class="alert alert-warning text-center shadow rounded shadow-sm">
      <i class="bi bi-exclamation-circle me-2"></i> You are not logged in.
    </div>
  <% } else { %>
    <div class="alert alert-success text-center shadow rounded shadow-sm">
      <i class="bi bi-person-circle me-2"></i> Welcome, <strong><%= currentUsername %></strong> ğŸ‰
    </div>
  <% } %>
</div>

<!-- ğŸŒŸ Add Project Form -->
<section class="add-form-container">
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-9 col-lg-8">
        <div class="card glass-card border-0 shadow-lg rounded-4">

          <!-- Header -->
          <div class="card-header text-center py-4"
               style="background: linear-gradient(135deg, #6366f1, #22d3ee); color: white; border: none;">
            <h3 class="fw-bold mb-0">âœ¨ Add New Project</h3>
            <p class="small mb-0 opacity-75">Showcase your awesome creation to the world</p>
          </div>

          <!-- Form Body -->
          <div class="card-body p-4">
            <form action="/projects" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
              
              <!-- Project Name -->
              <div class="mb-3">
                <label for="name" class="form-label fw-semibold">ğŸ“Œ Project Name</label>
                <input type="text" class="form-control modern-input" id="name" name="title" 
                       required placeholder="Enter project title">
              </div>

              <!-- Description -->
              <div class="mb-3">
                <label for="description" class="form-label fw-semibold">ğŸ“ Description</label>
                <textarea class="form-control modern-input" id="description" name="description" rows="4" 
                          required placeholder="Briefly describe your project"></textarea>
              </div>

              <!-- Tech Stack -->
              <div class="mb-3">
                <label for="techStack" class="form-label fw-semibold">âš¡ Tech Stack</label>
                <input type="text" class="form-control modern-input" id="techStack" name="techStack" 
                       required placeholder="Eg: MERN, React Native, Python">
              </div>

              <!-- GitHub Link -->
              <div class="mb-3">
                <label for="githubLink" class="form-label fw-semibold">ğŸŒ GitHub Repository</label>
                <input type="url" class="form-control modern-input" id="githubLink" name="githubLink" 
                       required placeholder="https://github.com/username/project">
              </div>

              <!-- Live Project Link -->
              <div class="mb-3">
                <label for="liveLink" class="form-label fw-semibold">ğŸš€ Live Project</label>
                <input type="url" class="form-control modern-input" id="liveLink" name="liveLink" 
                       required placeholder="https://yourproject.com">
              </div>

              <!-- Images -->
              <div class="mb-3">
                <label for="images" class="form-label fw-semibold">ğŸ–¼ Project Images</label>
                <input class="form-control modern-input" type="file" name="images" id="images" 
                       accept="image/*" multiple required onchange="previewMultipleImages(event)">
              </div>

              <!-- Image Previews -->
              <div class="mb-3">
                <div id="previewContainer" 
                     class="d-flex flex-wrap justify-content-center gap-2"></div>
              </div>

              <!-- Buttons -->
              <div class="d-flex justify-content-between">
                <a href="/projects" class="btn btn-outline-secondary rounded px-4 py-2">â¬… Back</a>
                <button type="submit" class="btn btn-gradient rounded px-4 py-2 fw-semibold">Add Project </button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- JS: Preview Multiple Images -->
<script>
  function previewMultipleImages(event) {
    const files = event.target.files;
    const container = document.getElementById("previewContainer");
    container.innerHTML = ""; // Clear old previews

    Array.from(files).forEach(file => {
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.style.maxHeight = "120px";
        img.style.maxWidth = "120px";
        img.classList.add("img-thumbnail", "shadow-sm", "rounded-3");
        container.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  }
</script>

<!-- ğŸ¨ Modern Styles -->
<style>
  .glass-card {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(15px);
    border-radius: 20px;
  }

  .modern-input {
    border-radius: 12px;
    padding: 12px;
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease-in-out;
  }
  .modern-input:focus {
    border-color: #6366f1;
    box-shadow: 0 0 12px rgba(99, 102, 241, 0.4);
  }

  .btn-gradient {
    /* background: linear-gradient(135deg, #6366f1, #22d3ee); */
    background: linear-gradient(135deg, #282bdb, #644de6);
    color: white;
    transition: transform 0.2s ease-in-out;
    border: none;
  }
  .btn-gradient:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
  }
</style>

<%- include("../partials/footer") %>
